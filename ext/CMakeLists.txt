##########################################################################################
# SGCT                                                                                   #
# Simple Graphics Cluster Toolkit                                                        #
#                                                                                        #
# Copyright (c) 2012-2020                                                                #
# For conditions of distribution and use, see copyright notice in LICENSE.md             #
##########################################################################################

add_subdirectory(glad)
set_property(TARGET glad PROPERTY FOLDER "Dependencies")

if (SGCT_DEP_INCLUDE_GLFW)
  set(GLFW_BUILD_EXAMPLES OFF CACHE BOOL "Build the GLFW example programs")
  set(GLFW_BUILD_TESTS OFF CACHE BOOL "Build the GLFW test programs")
  set(GLFW_BUILD_DOCS OFF CACHE BOOL "Build the GLFW documentation")
  set(GLFW_INSTALL OFF CACHE BOOL "Generate installation target")
  add_subdirectory(glfw)
  set_property(TARGET glfw PROPERTY FOLDER "Dependencies")
  disable_external_warnings(glfw)
endif ()

if (SGCT_DEP_INCLUDE_LIBPNG)
  add_subdirectory(lpng)
  if (TARGET zlibstatic)
    disable_external_warnings(zlibstatic)
  endif ()

  if (TARGET miniziplibstatic)
    disable_external_warnings(miniziplibstatic)
  endif ()
endif ()


if (SGCT_DEP_INCLUDE_FREETYPE AND SGCT_FREETYPE_SUPPORT)
  if (NOT TARGET freetype)
    add_subdirectory(freetype2) # needs zconf.h generated by lpng->zlib
    set_target_properties(freetype PROPERTIES FOLDER "Dependencies")
    disable_external_warnings(freetype)
  endif ()
endif ()

if (SGCT_DEP_INCLUDE_TINYXML)
  add_subdirectory(tinyxml2)
endif ()

if (SGCT_DEP_INCLUDE_VRPN)
  add_subdirectory(vrpn)
endif ()

if (NOT TARGET tracy)
  add_library(tracy STATIC "${PROJECT_SOURCE_DIR}/ext/tracy/TracyClient.cpp")
  target_include_directories(tracy PUBLIC "${PROJECT_SOURCE_DIR}/ext/tracy")
  set_property(TARGET tracy PROPERTY FOLDER "Dependencies")
  if (SGCT_DEP_ENABLE_TRACY)
    target_compile_definitions(tracy PUBLIC TRACY_ENABLE)
  endif ()
endif ()
